
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Base.calculateOnElements &#8212; Nimble Alpha documentation</title>
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Base.checkInvariants" href="nimble.core.data.Base.checkInvariants.html" />
    <link rel="prev" title="Base.stretch" href="nimble.core.data.Base.stretch.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../index.html">Nimble</a></h1>








<h3>Navigation</h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../examples/cleaning_data.html">Cleaning Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../examples/supervised_learning.html">Supervised Learning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../examples/exploring_data.html">Exploring Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../examples/unsupervised_learning.html">Unsupervised Learning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../examples/neural_networks.html">Neural Networks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../examples/merging_and_tidying_data.html">Merging and Tidying Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../examples/additional_functionality.html">Additional Functionality</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../install.html">Installation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">API Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cheatsheet.html">Cheatsheet</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../datasets.html">Example Datasets</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  <li><a href="../index.html">Nimble API Documentation</a><ul>
  <li><a href="nimble.core.data.Base.html">Base</a><ul>
      <li>Previous: <a href="nimble.core.data.Base.stretch.html" title="previous chapter">Base.stretch</a></li>
      <li>Next: <a href="nimble.core.data.Base.checkInvariants.html" title="next chapter">Base.checkInvariants</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="base-calculateonelements">
<h1>Base.calculateOnElements<a class="headerlink" href="#base-calculateonelements" title="Permalink to this headline">¶</a></h1>
<dl class="py method">
<dt id="nimble.core.data.Base.calculateOnElements">
<code class="sig-prename descclassname"><span class="pre">Base.</span></code><code class="sig-name descname"><span class="pre">calculateOnElements</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">toCalculate</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">points</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">features</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">preserveZeros</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">skipNoneReturnValues</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outputType</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">useLog</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#nimble.core.data.Base.calculateOnElements" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply a calculation to each element.</p>
<p>Return a new object with a function or mapping applied to each
element in this object or subset of points and features in this
object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>toCalculate</strong> (<em>function</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.10)"><em>dict</em></a>) – <ul>
<li><p>function - in the form of toCalculate(elementValue)
or toCalculate(elementValue, pointIndex, featureIndex)</p></li>
<li><p>dictionary -  map the current element [key] to the
transformed element [value].</p></li>
</ul>
</p></li>
<li><p><strong>points</strong> (<em>point</em><em>, </em><em>list of points</em>) – The subset of points to limit the calculation to. If None,
the calculation will apply to all points.</p></li>
<li><p><strong>features</strong> (<em>feature</em><em>, </em><em>list of features</em>) – The subset of features to limit the calculation to. If None,
the calculation will apply to all features.</p></li>
<li><p><strong>preserveZeros</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a>) – Bypass calculation on zero values</p></li>
<li><p><strong>skipNoneReturnValues</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a>) – Bypass values when <code class="docutils literal notranslate"><span class="pre">toCalculate</span></code> returns None. If False,
the value None will replace the value if None is returned.</p></li>
<li><p><strong>outputType</strong> (<em>nimble data type</em>) – Return an object of the specified type. If None, the
returned object will have the same type as the calling
object.</p></li>
<li><p><strong>useLog</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><em>None</em></a>) – Local control for whether to send object creation to the
logger. If None (default), use the value as specified in the
“logger” “enabledByDefault” configuration option. If True,
send to the logger regardless of the global option. If
False, do <strong>NOT</strong> send to the logger, regardless of the
global option.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><em>nimble Base object</em></p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="nimble.core.data.Base.transformElements.html#nimble.core.data.Base.transformElements" title="nimble.core.data.Base.transformElements"><code class="xref py py-obj docutils literal notranslate"><span class="pre">transformElements</span></code></a>, <a class="reference internal" href="nimble.core.data.Points.calculate.html#nimble.core.data.Points.calculate" title="nimble.core.data.Points.calculate"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Points.calculate</span></code></a>, <a class="reference internal" href="nimble.core.data.Features.calculate.html#nimble.core.data.Features.calculate" title="nimble.core.data.Features.calculate"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Features.calculate</span></code></a></p>
</div>
<p class="rubric">Examples</p>
<p>Simple calculation on all elements.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">X</span> <span class="o">=</span> <span class="n">nimble</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">twos</span> <span class="o">=</span> <span class="n">X</span><span class="o">.</span><span class="n">calculateOnElements</span><span class="p">(</span><span class="k">lambda</span> <span class="n">elem</span><span class="p">:</span> <span class="n">elem</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">twos</span>
<span class="go">&lt;Matrix 3pt x 3ft</span>
<span class="go">     0 1 2</span>
<span class="go">   ┌──────</span>
<span class="go"> 0 │ 2 2 2</span>
<span class="go"> 1 │ 2 2 2</span>
<span class="go"> 2 │ 2 2 2</span>
<span class="go">&gt;</span>
</pre></div>
</div>
<p>Calculate while preserving zero values.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">X</span> <span class="o">=</span> <span class="n">nimble</span><span class="o">.</span><span class="n">identity</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">returnType</span><span class="o">=</span><span class="s2">&quot;Sparse&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">addTen</span> <span class="o">=</span> <span class="n">X</span><span class="o">.</span><span class="n">calculateOnElements</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">10</span><span class="p">,</span>
<span class="gp">... </span>                               <span class="n">preserveZeros</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">addTen</span>
<span class="go">&lt;Sparse 3pt x 3ft</span>
<span class="go">     0  1  2</span>
<span class="go">   ┌─────────</span>
<span class="go"> 0 │ 11 0  0</span>
<span class="go"> 1 │ 0  11 0</span>
<span class="go"> 2 │ 0  0  11</span>
<span class="go">&gt;</span>
</pre></div>
</div>
<p>Calculate on a subset of points and features.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">X</span> <span class="o">=</span> <span class="n">nimble</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="n">returnType</span><span class="o">=</span><span class="s2">&quot;List&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">calc</span> <span class="o">=</span> <span class="n">X</span><span class="o">.</span><span class="n">calculateOnElements</span><span class="p">(</span><span class="k">lambda</span> <span class="n">elem</span><span class="p">:</span> <span class="n">elem</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>
<span class="gp">... </span>                             <span class="n">points</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
<span class="gp">... </span>                             <span class="n">features</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">calc</span>
<span class="go">&lt;List 2pt x 2ft</span>
<span class="go">     0 1</span>
<span class="go">   ┌────</span>
<span class="go"> 0 │ 2 2</span>
<span class="go"> 1 │ 2 2</span>
<span class="go">&gt;</span>
</pre></div>
</div>
<p>Calculating with None return values. With the <code class="docutils literal notranslate"><span class="pre">addTenToEvens</span></code>
function defined below, An even values will be return a value,
while an odd value will return None. If <code class="docutils literal notranslate"><span class="pre">skipNoneReturnValues</span></code>
is False, the odd values will be replaced with None (or nan
depending on the object type) if set to True the odd values will
remain as is. Both cases are presented.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">addTenToEvens</span><span class="p">(</span><span class="n">elem</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">if</span> <span class="n">elem</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="n">elem</span> <span class="o">+</span> <span class="mi">10</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="kc">None</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lst</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span>
<span class="gp">... </span>       <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">],</span>
<span class="gp">... </span>       <span class="p">[</span><span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">X</span> <span class="o">=</span> <span class="n">nimble</span><span class="o">.</span><span class="n">data</span><span class="p">(</span><span class="n">lst</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dontSkip</span> <span class="o">=</span> <span class="n">X</span><span class="o">.</span><span class="n">calculateOnElements</span><span class="p">(</span><span class="n">addTenToEvens</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dontSkip</span>
<span class="go">&lt;Matrix 3pt x 3ft</span>
<span class="go">     0  1  2</span>
<span class="go">   ┌─────────</span>
<span class="go"> 0 │    12</span>
<span class="go"> 1 │ 14    16</span>
<span class="go"> 2 │    18</span>
<span class="go">&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">skip</span> <span class="o">=</span> <span class="n">X</span><span class="o">.</span><span class="n">calculateOnElements</span><span class="p">(</span><span class="n">addTenToEvens</span><span class="p">,</span>
<span class="gp">... </span>                             <span class="n">skipNoneReturnValues</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">skip</span>
<span class="go">&lt;Matrix 3pt x 3ft</span>
<span class="go">     0  1  2</span>
<span class="go">   ┌─────────</span>
<span class="go"> 0 │ 1  12 3</span>
<span class="go"> 1 │ 14 5  16</span>
<span class="go"> 2 │ 7  18 9</span>
<span class="go">&gt;</span>
</pre></div>
</div>
<p>Keywords: 
apply, map, mapping, compute, measure, statistics, stats,
applymap</p>
</dd></dl>

</section>


          </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
    <div class="footer">
      &copy;2022, Spark Wave.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 3.5.3</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../../_sources/docs/generated/nimble.core.data.Base.calculateOnElements.rst"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>